workflows:
  plan_to_prd:
    intent: "Spec-first PRD with TDD"
    steps:
      - driver
      - spec_agent
      - test_agent
      - solver
      - skeptic
      - verifier
      - approval_gate
      - memory_agent
    approvals: [prd_signoff]

  architecture_review:
    intent: "Enterprise architecture validation"
    steps:
      - driver
      - spec_agent
      - test_agent
      - nfr_agent
      - domain_experts.backend_architect
      - domain_experts.security_iam
      - domain_experts.devops_platform
      - skeptic
      - experience_agent
      - risk_scorer
      - collapse_agent
      - verifier
      - metrics_agent
      - confidence_agent
      - drift_detector
      - dashboard_agent
      - approval_gate
      - memory_agent
    approvals: [security_signoff]

  release_readiness:
    intent: "Evidence-gated production release"
    steps:
      - driver
      - test_agent
      - nfr_agent
      - cicd_agent
      - prod_safety
      - domain_experts.devops_platform
      - skeptic
      - experience_agent
      - risk_scorer
      - collapse_agent
      - verifier
      - metrics_agent
      - confidence_agent
      - drift_detector
      - dashboard_agent
      - release_manager
      - memory_agent
    approvals: [prod_deploy]

  # Code Generation & Implementation Workflows
  build_feature:
    intent: "End-to-end feature implementation from PRD to working code"
    steps:
      - driver
      - spec_agent
      - test_generator
      - code_generator
      - language_experts.typescript_expert
      - language_experts.rust_expert
      - language_experts.python_expert
      - skeptic
      - build_validator
      - verifier
      - memory_agent
    approvals: [code_review]

  generate_code:
    intent: "Generate production-ready code with tests"
    steps:
      - driver
      - spec_agent
      - test_generator
      - code_generator
      - language_experts.typescript_expert
      - language_experts.frontend_expert
      - language_experts.database_expert
      - build_validator
      - verifier
      - memory_agent
    approvals: []

  refactor_code:
    intent: "Refactor existing code with safety checks"
    steps:
      - driver
      - test_agent
      - refactor_agent
      - language_experts.typescript_expert
      - skeptic
      - build_validator
      - verifier
      - memory_agent
    approvals: []

  build_integration:
    intent: "Build API integrations and service connections"
    steps:
      - driver
      - api_designer
      - integration_builder
      - test_generator
      - language_experts.backend_architect
      - domain_experts.security_iam
      - skeptic
      - build_validator
      - verifier
      - memory_agent
    approvals: [security_review]

  multi_language_project:
    intent: "Orchestrate multi-language project (e.g., TypeScript + Rust + Python)"
    steps:
      - driver
      - spec_agent
      - domain_experts.backend_architect
      - language_experts.typescript_expert
      - language_experts.rust_expert
      - language_experts.python_expert
      - test_generator
      - code_generator
      - integration_builder
      - skeptic
      - build_validator
      - verifier
      - memory_agent
    approvals: [architecture_review]
